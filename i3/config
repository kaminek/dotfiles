###############################################################################
#
#	‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó
#	‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïë    ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë
#	‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù    ‚ñà‚ñà‚ïë ‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë
#	‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó    ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë
#	‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù    ‚ïö‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë
#	‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù      ‚ïö‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù
#
###############################################################################

# STARTUP

#Numlock enable
exec numlockx

exec setxkbmap -option caps:escape

# exec_always dunst -config $HOME/.config/dunst/dunstrc
# exec_always --no-startup-id $HOME/.config/i3/bin/picom-configure
# exec_always --no-startup-id /usr/bin/picom --config $XDG_RUNTIME_DIR/i3/picom.conf
# exec_always --no-startup-id $HOME/.config/i3/bin/i3-companion
# exec_always --no-startup-id $HOME/.config/i3/bin/polybar

# polkit
# exec_always /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# exec_always xiccd --edid
# network manager applet
exec_always nm-applet --indicator

# bluetooth manager applet
exec_always blueman-applet

#exec xss-lock -n "$HOME/.config/i3/scripts/brightness.sh screensaver" -l -- $HOME/.config/i3/scripts/lockscreen.sh --suspend

# Use feh to set wallpaper
exec_always feh --bg-fill $HOME/.config/i3/wallpapers


# screenshots
exec_always flameshot

# Always mute microphone at startup
#exec_always amixer sset Capture nocap

# Use Headset Mic as default input source
#exec_always amixer -c0 sset "Input Source" "Headset Mic" 



# Constants

# mod
set $mod Mod4

set $borderpx 3

set $base00 #101218
set $base01 #1f222d
set $base02 #252936
set $base03 #7780a1
set $base04 #C0C5CE
set $base05 #d1d4e0
set $base06 #C9CCDB
set $base07 #ffffff
set $base08 #ee829f
set $base09 #f99170
set $base0A #ffefcc
set $base0B #a5ffe1
set $base0C #97e0ff
set $base0D #97bbf7
set $base0E #c0b7f9
set $base0F #fcc09e

set $workspace1 "1"
set $workspace2 "2"
set $workspace3 "3"
set $workspace4 "4"
set $workspace5 "5"
set $workspace6 "6"
set $workspace7 "7"
set $workspace8 "8"
set $workspace9 "9"
set $workspace0 "10"

set $terminal alacritty
set $browser google-chrome-stable
set $mediaplayer spotify

# Layout

smart_gaps on
smart_borders on
gaps inner 10
gaps outer 10

# Window borders
for_window [class="^.*"] border pixel 2

# General Configuration
font pango: SFMono Nerd Font Mono 10
hide_edge_borders both


# Bindings


# Window-Related Bindings

# Kill focused window
bindsym $mod+Shift+q kill

# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Full screen window
bindsym $mod+f fullscreen global

# split in horizontal orientation
bindsym $mod+Control+h split v

# split in vertical orientation
bindsym $mod+Control+v split h

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+z focus child

# change focus between tiling / floating windows
bindsym $mod+d focus mode_toggle

# Resize mode
bindsym $mod+r mode " ÔÅ• "

mode " ÔÅ• " {

        bindsym h resize shrink width 2 px or 2 ppt
        bindsym j resize grow height 2 px or 2 ppt
        bindsym k resize shrink height 2 px or 2 ppt
        bindsym l resize grow width 2 px or 2 ppt
        bindsym Escape mode "default"
        bindsym Return mode "default"
}

# Restart-Related Bindings
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' i3-msg exit

# === Lock the screen
bindsym $mod+shift+x exec betterlockscreen -l dim
# lock screen
bindsym XF86ScreenSaver exec --no-startup-id exec loginctl lock-session
bindsym $mod+Delete exec --no-startup-id exec loginctl lock-session

# get info about container/workspace
bindsym $mod+i nop "container-info"
bindsym $mod+Shift+i nop "workspace-info"

# Program-Related Bindings
bindsym $mod+Return exec $terminal

# # Swap horizontally split windows (left ‚Üî right)
# bindsym $mod+Shift+s exec --no-startup-id i3-msg 'focus left; swap container with left'

# Custom Bindings

# bindsym --release Print exec imgur-screenshot
bindsym --release Print exec --no-startup-id scrot 'screenshot-%Y-%m-%d-%T.png' -e 'mv $f ~/Pictures/screenshots'  | notify-send 'screnshot' 'taken. in ~/pictures/screenshots'

# misc
bindsym --release $mod+Shift+o exec --no-startup-id autorandr --cycle

# Adjust volume
# -Ctrl is used to control the microphone
# -Shift is used to change values at higher rate

# volume down
bindsym XF86AudioLowerVolume exec --no-startup-id exec pactl set-sink-volume @DEFAULT_SINK@ -5%
# volume up
bindsym XF86AudioRaiseVolume exec --no-startup-id exec pactl set-sink-volume @DEFAULT_SINK@ +5%
# volume mute
bindsym XF86AudioMute        exec --no-startup-id exec ~/.config/i3/bin/toggle-mute sink
bindsym XF86AudioMicMute     exec --no-startup-id exec ~/.config/i3/bin/toggle-mute source
bindsym XF86AudioPlay        exec --no-startup-id exec playerctl -p $mediaplayer play-pause
bindsym XF86AudioPause       exec --no-startup-id exec playerctl -p $mediaplayer pause
bindsym XF86AudioStop        exec --no-startup-id exec playerctl -p $mediaplayer stop
bindsym XF86AudioNext        exec --no-startup-id exec playerctl -p $mediaplayer next
bindsym XF86AudioPrev        exec --no-startup-id exec playerctl -p $mediaplayer previous

# bindsym Ctrl+XF86AudioLowerVolume  exec --no-startup-id $HOME/.config/i3/scripts/microphone.sh down 5
# bindsym Ctrl+XF86AudioRaiseVolume exec --no-startup-id $HOME/.config/i3/scripts/microphone.sh up 5
# bindsym Ctrl+XF86AudioMute exec --no-startup-id $HOME/.config/i3/scripts/microphone.sh mute


# brightness
bindsym XF86MonBrightnessUp exec --no-startup-id exec brightnessctl -q set +5%
bindsym XF86MonBrightnessDown exec --no-startup-id exec brightnessctl -q set 5%-

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod
floating_minimum_size 55 x 30



# start dmenu (a program launcher)
# bindsym $mod+d exec rofi -show drun -theme $HOME/.config/rofi/config.rasi
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
bindsym $mod+space exec --no-startup-id rofi -show drun -eh 2

# Workspace-Related Bindings
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Widow Colours
#                       border  background text    indicator
client.focused          $base01 $base03    $base07 $base0F
client.focused_inactive $base02 $base02    $base03 $base0F
client.unfocused        $base02 $base02    $base03 $base0F
client.urgent           $base02 $base08    $base00 $base0F

# Apps Layout

for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable

for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable

no_focus   [window_type="splash"]

# Program Workspaces
assign [instance="brave-browser|firefox|google-chrome"] $workspace1
assign [class="Brave-browser"] $workspace1
assign [class="Google-chrome"] $workspace1
assign [instance="telegram|discord|slack"] $workspace3
assign [instance="(.*join\?action\=join.*|.*zoom.*)"] $workspace0

# Floating default windows
for_window [class="Lxappearance"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Nm-connection-editor"] floating enable
for_window [window_role="PictureInPicture"] floating enable
for_window [class="Blueman-manager"] floating enable,  resize set width 70 ppt height 40 ppt

# Firefox sharing indicator
for_window [floating_from="auto" title="Firefox ‚Äî Sharing Indicator"] border none, sticky enable, move position 20 ppt -5 px
no_focus   [floating_from="auto" title="Firefox ‚Äî Sharing Indicator"]
# Chromium sharing indicator
for_window [floating_from="auto" title=" is sharing your screen.$"] border none, sticky enable, move position 20 ppt -5 px
no_focus   [floating_from="auto" title=" is sharing your screen.$"]
# Zoom (üò±?)
for_window [instance="(.*join\?action\=join.*|.*zoom.*)"] floating enable
for_window [instance="(.*join\?action\=join.*|.*zoom.*)" title="Zoom - Licensed Account"] floating disable
for_window [instance="(.*join\?action\=join.*|.*zoom.*)" title="Zoom - Free Account"] floating disable
for_window [instance="(.*join\?action\=join.*|.*zoom.*)" title="Zoom Meeting"] floating disable
for_window [instance="(.*join\?action\=join.*|.*zoom.*)" title="Zoom Webinar"] floating disable
# for_window [floating] resize set 1200 800; move absolute position center


# TODO: exec_always --no-startup-id exec systemctl --user start --no-block i3-session.target
exec --no-startup-id exec i3-msg "\
  workspace number 1; layout tabbed; exec /sbin/brave; exec /sbin/google-chrome-stable; \
  workspace number 2; exec $terminal; \
  workspace number 3; exec slack; \
  workspace number 1"
